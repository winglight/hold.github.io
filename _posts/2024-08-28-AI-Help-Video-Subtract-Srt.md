# AI助我写代码（1）：批量生成视频字幕

## 综述

* AI（Claude3.5）生产90%以上的代码
* 通过增加新的功能，可以不断迭代完善软件
* 通过复制输出的异常，可以在一定程度上由AI修复
* 最佳的AI编程实践，是有基础的程序员+AI协同编程，能够极大提高效率，如果是完全0基础，碰到bug无法解决就难以进行

## 操作视频（TODO）

## 需求
1. 我有一批英文教程视频没有字幕，希望能批量生成srt字幕文件
2. 现有的工具只能支持一次处理一个视频，希望支持一次处理整个目录下所有视频文件

## 操作步骤

1. 因为是基于另外一个js的开源项目，所以除了提示词，还上传了一个js文件，提示词如下：
   ```
   将这段代码改为python
   ```
   连续执行了四次，才把四个文件转换完成，现在想想，其实可以一次上传四个js文件，还能节约免费次数。
2. 因为当前的版本只支持一次处理一个文件，所以要AI增加main.py的功能，提示词如下：
   ```
   将此代码中文件处理的部分，加入对于子目录的遍历支持，注意正确处理子目录中的文件路径，可以仅支持最多3级子目录的支持
   ```
3. 修复代码中的问题，提示词如下：
   ```
   base_dir这个变量为什么没有使用？
   ```
4. 基于python的常用设计，使用.env保存配置信息，附件是config.py，提示词如下：
   ```
   将此文件中的常量转为.env文件中的环境变量，并使用dotnet库读取环境变量
   ```
5. 再次增加配置功能，支持多目录，提示词如下：
   ```
   重新实现.env中的配置字段，以支持VIDEO_DIR的值可以是多个目录
   ```
6. 增加新的功能，支持多种文件后缀，提示词如下：
   ```
   重新实现.env中的配置字段，以支持VIDEO_SUFFIX的值可以是多个文件后缀
   ```
7. 文件多了，希望能看到处理进度，附件是main.py，提示词如下：
   ```
   将traverse_dirs方法根据实际处理的文件数量作为任务总数，当前已处理文件数量为进度，运行程序后，屏蔽其他命令行输出，仅刷新进度，并估计剩余时间
   ```
8. AI再次出bug了，让它修复，提示词如下：
   ```
   由于traverse_dirs 函数递归调用自身，所以代码中的计数有问题
   ```
9. AI还是没解决bug，让它再次修复，提示词如下：
   ```
   依然因为递归导致bug，需要把计数部分放到traverse_dirs 函数外面
   ```
10. 看起来AI对于递归调用处理不好，给它具体的修复方式看看，提示词如下：
   ```
   因为traverse_dirs 函数递归调用完成全部处理，所以第4点的更新进度等代码不能放在traverse_dirs 函数外面
   ```
11. 到这里发现，AI怎样也无法处理递归，我只好自己手动修复bug
12. 之前都是用命令行执行，我想加个GUI更容易看到进度，附件是三个python文件源码，提示词如下：
   ```
   在main.py中的功能（批量导出指定目录下的视频文件的字幕）基础上，使用GUI封装，提供界面配置config.py中的几个选项，并且在点击按钮开始导出后，提供进度条显示当前进度及预计完成时间
   ```
13. 图形界面似乎是AI擅长的，一次性就成功了，因此最后的工作就是生成安装包，提示词如下：
   ```
   提供以上python打包及安装程序，并且在GUI界面上提供以下依赖环境检查和安装：1. git程序；2. ffmpeg程序；
   ```
   这次代码没有一次生成完，补了两次提示词才全部生成完毕：
   ```
   继续
   ```
14. 最后我手动修复了几个bug，再次使用AI生成了readme.md文件，提示词如下：
   ```
   为这个开源项目攥写readme，说明项目是什么，如何做到，有什么优势，适合什么场景，安装指南，使用指南，要求使用markdown格式：https://github.com/winglight/VideoExtractSub
   ```